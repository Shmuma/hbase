<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;15.&nbsp;Troubleshooting and Debugging HBase</title><link rel="stylesheet" href="css/freebsd_docbook.css" type="text/css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="book.html" title="The Apache HBase Book"><link rel="up" href="book.html" title="The Apache HBase Book"><link rel="prev" href="bloom_footprint.html" title="14.2.&nbsp;Bloom StoreFile footprint"><link rel="next" href="trouble.log.html" title="15.2.&nbsp;Logs"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;15.&nbsp;Troubleshooting and Debugging HBase</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="bloom_footprint.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="trouble.log.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter&nbsp;15.&nbsp;Troubleshooting and Debugging HBase"><div class="titlepage"><div><div><h2 class="title"><a name="trouble"></a>Chapter&nbsp;15.&nbsp;Troubleshooting and Debugging HBase</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="trouble.html#trouble.general">15.1. General Guidelines</a></span></dt><dt><span class="section"><a href="trouble.log.html">15.2. Logs</a></span></dt><dd><dl><dt><span class="section"><a href="trouble.log.html#trouble.log.locations">15.2.1. Log Locations</a></span></dt></dl></dd><dt><span class="section"><a href="trouble.tools.html">15.3. Tools</a></span></dt><dd><dl><dt><span class="section"><a href="trouble.tools.html#trouble.tools.searchhadoop">15.3.1. search-hadoop.com</a></span></dt><dt><span class="section"><a href="trouble.tools.html#trouble.tools.tail">15.3.2. tail</a></span></dt><dt><span class="section"><a href="trouble.tools.html#trouble.tools.top">15.3.3. top</a></span></dt><dt><span class="section"><a href="trouble.tools.html#trouble.tools.jps">15.3.4. jps</a></span></dt><dt><span class="section"><a href="trouble.tools.html#trouble.tools.jstack">15.3.5. jstack</a></span></dt><dt><span class="section"><a href="trouble.tools.html#trouble.tools.opentsdb">15.3.6. OpenTSDB</a></span></dt><dt><span class="section"><a href="trouble.tools.html#trouble.tools.clustersshtop">15.3.7. clusterssh+top</a></span></dt></dl></dd><dt><span class="section"><a href="trouble.client.html">15.4. Client</a></span></dt><dd><dl><dt><span class="section"><a href="trouble.client.html#trouble.client.scantimeout">15.4.1. ScannerTimeoutException</a></span></dt></dl></dd><dt><span class="section"><a href="trouble.rs.html">15.5. RegionServer</a></span></dt><dd><dl><dt><span class="section"><a href="trouble.rs.html#trouble.rs.startup">15.5.1. Startup Errors</a></span></dt><dt><span class="section"><a href="trouble.rs.html#trouble.rs.runtime">15.5.2. Runtime Errors</a></span></dt><dt><span class="section"><a href="trouble.rs.html#trouble.rs.shutdown">15.5.3. Shutdown Errors</a></span></dt></dl></dd><dt><span class="section"><a href="trouble.master.html">15.6. Master</a></span></dt><dd><dl><dt><span class="section"><a href="trouble.master.html#trouble.master.startup">15.6.1. Startup Errors</a></span></dt><dt><span class="section"><a href="trouble.master.html#trouble.master.startup">15.6.2. Shutdown Errors</a></span></dt></dl></dd></dl></div><div class="section" title="15.1.&nbsp;General Guidelines"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="trouble.general"></a>15.1.&nbsp;General Guidelines</h2></div></div></div><p>
          Always start with the master log (TODO: Which lines?).
          Normally it&#8217;s just printing the same lines over and over again.
          If not, then there&#8217;s an issue.
          Google or <a class="link" href="http://search-hadoop.com" target="_top">search-hadoop.com</a>
          should return some hits for those exceptions you&#8217;re seeing.
      </p><p>
          An error rarely comes alone in HBase, usually when something gets screwed up what will
          follow may be hundreds of exceptions and stack traces coming from all over the place.
          The best way to approach this type of problem is to walk the log up to where it all
          began, for example one trick with RegionServers is that they will print some
          metrics when aborting so grepping for <span class="emphasis"><em>Dump</em></span>
          should get you around the start of the problem.
      </p><p>
          RegionServer suicides are &#8220;normal&#8221;, as this is what they do when something goes wrong.
          For example, if ulimit and xcievers (the two most important initial settings, see <a class="xref" href="notsoquick.html#ulimit" title="1.3.1.6.&nbsp; ulimit and nproc">Section&nbsp;1.3.1.6, &#8220;
          <code class="varname">ulimit</code>
            and
          <code class="varname">nproc</code>
        &#8221;</a>)
          aren&#8217;t changed, it will make it impossible at some point for DataNodes to create new threads
          that from the HBase point of view is seen as if HDFS was gone. Think about what would happen if your
          MySQL database was suddenly unable to access files on your local file system, well it&#8217;s the same with
          HBase and HDFS. Another very common reason to see RegionServers committing seppuku is when they enter
          prolonged garbage collection pauses that last longer than the default ZooKeeper session timeout.
          For more information on GC pauses, see the
          <a class="link" href="http://www.cloudera.com/blog/2011/02/avoiding-full-gcs-in-hbase-with-memstore-local-allocation-buffers-part-1/" target="_top">3 part blog post</a>  by Todd Lipcon
          and <a class="xref" href="performance.html#gcpause" title="13.1.1.1.&nbsp;Long GC pauses">Section&nbsp;13.1.1.1, &#8220;Long GC pauses&#8221;</a> above. 
      </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="bloom_footprint.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="trouble.log.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">14.2.&nbsp;Bloom StoreFile footprint&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="book.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;15.2.&nbsp;Logs</td></tr></table></div></body></html>